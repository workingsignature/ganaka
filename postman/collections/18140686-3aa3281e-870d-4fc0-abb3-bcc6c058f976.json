{
	"info": {
		"_postman_id": "18140686-3aa3281e-870d-4fc0-abb3-bcc6c058f976",
		"name": "Clerk",
		"description": "Contains APIs that deal with Clerk APIs to generate authentication tokens for test sessions.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Create a session",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "cbb9a473-1a44-4b93-a078-f1c113875b6a",
						"exec": [
							"const response = pm.response.json();",
							"pm.collectionVariables.set(\"session_id\", response.id);",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"id": "18140686-3ac110c9-ca98-49c9-b51d-dfdb2c812c0b",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{vault:clerk_secret_key}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"user_id\": \"user_34ByDjOdL0ItP3dXVTw0iraHWBq\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.clerk.com/v1/sessions",
					"protocol": "https",
					"host": [
						"api",
						"clerk",
						"com"
					],
					"path": [
						"v1",
						"sessions"
					]
				},
				"description": "## Create a Session (POST /v1/sessions)\n\nThis endpoint generates a `session_id` for a specified user in Clerk, using their unique user ID. Creating a session is the first step in authenticating a user with Clerk's platform APIs.\n\n### How it Works\n\n- **Input:** Provide the `user_id` of the user for whom you want to create a session in the request body.\n    \n- **Process:** The API creates an active session for the specified user and returns a unique `session_id` in the response.\n    \n- **Next Step:** Use the returned `session_id` with the [<code>Create session token</code>](https://request/18140686-f15ffd27-e3a2-49e3-b488-e9158979e883) endpoint to generate a session token. This session token is required for authenticating subsequent requests to Clerk platform APIs that require user authentication.\n    \n\n### Request Example\n\n``` json\nPOST https://api.clerk.com/v1/sessions\nContent-Type: application/json\nAuthorization: Bearer <clerk_secret_key>\n{\n  \"user_id\": \"user_34ByDjOdL0ItP3dXVTw0iraHWBq\"\n}\n\n ```\n\n### Response Example\n\n``` json\n{\n  \"id\": \"sess_1234567890abcdef\",\n  ...\n}\n\n ```\n\n- The `id` field in the response is the generated `session_id`.\n    \n\n### Use Case\n\n- Use this endpoint to programmatically create an active session for a user.\n    \n- The session enables you to generate a session token, which is then used to authenticate API requests on behalf of the user.\n    \n\n### Related Endpoints\n\n- [Create session token](https://request/18140686-f15ffd27-e3a2-49e3-b488-e9158979e883): Exchange the `session_id` for a session token.\n    \n\n### Notes\n\n- Ensure you have the correct `user_id` and valid Clerk API credentials.\n    \n- The session token generated in the next step is required for all authenticated requests to Clerk platform APIs."
			},
			"response": []
		},
		{
			"name": "Create session token",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "2552c0b1-6bc5-41b5-ab2a-f45a0d0302ef",
						"exec": [
							"const response = pm.response.json();",
							"pm.globals.set(\"clerk_access_token\", response.jwt);",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"id": "18140686-f15ffd27-e3a2-49e3-b488-e9158979e883",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{vault:clerk_secret_key}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"expires_in_seconds\": 1800\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.clerk.com/v1/sessions/{{session_id}}/tokens",
					"protocol": "https",
					"host": [
						"api",
						"clerk",
						"com"
					],
					"path": [
						"v1",
						"sessions",
						"{{session_id}}",
						"tokens"
					]
				},
				"description": "## Create Session Token\n\nThis endpoint generates a session token (JWT) for an existing Clerk session. The session token can be used to authenticate requests to APIs that require Clerk-based authentication. This is typically used in server-to-server communication or when you need to programmatically act on behalf of a user session.\n\n### **Endpoint**\n\n`POST https://api.clerk.com/v1/sessions/{{session_id}}/tokens`\n\n---\n\n### **Purpose**\n\nUse this endpoint to create a new session token for a specific session. The generated token can be used to authorize API requests as the user associated with the session.\n\n---\n\n### **Required Headers**\n\n- `Content-Type: application/json`\n    \n- `Authorization: Bearer {{vault:clerk_secret_key}}`\n    \n    - Replace `{{vault:clerk_secret_key}}` with your Clerk secret key stored securely in the Postman Vault.\n        \n\n---\n\n### **Path Parameters**\n\n- `session_id` (string, required):\n    - The unique identifier of the Clerk session for which you want to generate a token. This should be set in the URL path as `{{session_id}}`.\n        \n\n---\n\n### **Request Body**\n\nSend a JSON object in the request body:\n\n```\n{\n  \"expires_in_seconds\": null\n}\n\n ```\n\n- `expires_in_seconds` (integer | null, optional):\n    - The number of seconds until the token expires. If set to `null`, the token will use the default expiration configured in your Clerk settings.\n        \n\n---\n\n### **Example Request**\n\n```\ncurl 'https://api.clerk.com/v1/sessions/{session_id}/tokens' \\\n  --request POST \\\n  --header 'Content-Type: application/json' \\\n  --header 'Authorization: Bearer YOUR_SECRET_TOKEN' \\\n  --data '{\n    \"expires_in_seconds\": null\n  }'\n\n ```\n\n---\n\n### **Expected Response**\n\nA successful response returns a JSON object containing the generated session token:\n\n``` json\n{\n  \"object\": \"token\",\n  \"jwt\": \"<JWT_TOKEN_STRING>\"\n}\n\n ```\n\n- `object`: Always set to `token`.\n    \n- `jwt`: The generated JWT session token string. Use this token to authenticate subsequent API requests.\n    \n\n---\n\n### **Usage Notes**\n\n- Ensure the `session_id` is valid and corresponds to an active session.\n    \n- The `Authorization` header must contain a valid Clerk secret key with sufficient permissions.\n    \n- Store the returned JWT securely and use it as a Bearer token in API requests that require user authentication.\n    \n\n---\n\n### **Related Endpoints**\n\n- [Create a session](https://request/18140686-3ac110c9-ca98-49c9-b51d-dfdb2c812c0b): Use this endpoint to create a session and obtain a `session_id` before generating a session token."
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "7e238f7e-878c-4a68-84b2-1a83425eceac",
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "e34fd739-aaa7-4d60-8071-db732d187774",
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "session_id",
			"value": "",
			"description": "Session ID for test user in Clerk dev account"
		}
	]
}